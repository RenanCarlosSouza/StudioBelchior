<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Carlinhos </title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="telaLogin" class="login-overlay">
        <div class="login-box">
            <h2 style="text-transform: uppercase; letter-spacing: 2px;">SISTEMA CARLINHOS</h2>
            <input type="email" id="emailLogin" placeholder="E-MAIL (EX: admin@carlinhos.com)">
            <input type="password" id="senhaLogin" placeholder="SENHA">
            <button onclick="fazerLogin()" style="margin-top: 15px;">ENTRAR NO SISTEMA</button>
            <p id="msgErroLogin" style="color: var(--danger); margin-top: 15px; font-weight: bold;"></p>
        </div>
    </div>

    <div id="appConteudo" style="display: none;">

        <header class="main-header no-print">
            <div class="logo">SISTEMA CARLINHOS <span style="font-size:0.8rem; color:var(--success);">‚óè Online</span>
            </div>
            <nav class="main-nav">
                <button onclick="mostrarTela('clientes')" class="active">üë• ALUNOS</button>
                <button onclick="mostrarTela('agenda')">üìÖ AGENDA</button>
                <button onclick="mostrarTela('financeiro')">üí∞ FINANCEIRO</button>
                <button onclick="fazerLogout()"
                    style="border: 1px solid var(--danger); color: var(--danger);">SAIR</button>
            </nav>
        </header>

        <main class="content">

            <section id="clientes" class="tela ativa">
                <div class="header-section">
                    <h2>GEST√ÉO DE ALUNOS</h2>
                </div>

                <div class="stats-alunos">
                    <div class="stat-card">
                        <span class="label">TOTAL</span>
                        <span class="value" id="statTotal">0</span>
                    </div>
                    <div class="stat-card pendente">
                        <span class="label">PENDENTES</span>
                        <span class="value" id="statPendentes">0</span>
                    </div>
                    <div class="stat-card recebido">
                        <span class="label">RECEBIDO</span>
                        <span class="value" id="statRecebido">R$ 0</span>
                    </div>
                </div>

                <div class="form-card">
                    <div class="novo-cliente-area">
                        <h4 id="tituloFormCliente">CADASTRAR NOVO ALUNO:</h4>
                        <div class="input-group">
                            <input type="hidden" id="idClienteEditando">
                            <input type="text" id="nomeCliente" placeholder="NOME COMPLETO">
                            <input type="text" id="telefoneCliente" placeholder="TELEFONE">
                            <button id="btnSalvarCliente" onclick="salvarOuAtualizarCliente()">+ ADICIONAR</button>
                            <button id="btnCancelarEdicao" onclick="cancelarEdicao()"
                                style="display:none; background:#b45309;">CANCELAR</button>
                        </div>
                    </div>
                    <hr style="border: 1px solid var(--border); margin: 20px 0;">

                    <div class="filtro-mes-area">
                        <label style="font-weight: 800; color: var(--text-secondary);">üìÖ M√äS DE REFER√äNCIA:</label>
                        <input type="month" id="mesReferencia">
                    </div>
                </div>

                <div class="barra-filtros-alunos">
                    <input type="text" id="inputBusca" placeholder="üîç BUSCAR NOME..." oninput="renderizarClientes()">

                    <div class="botoes-filtro">
                        <button onclick="filtrarClientes('todos')" class="btn-filtro active"
                            id="btnFiltroTodos">TODOS</button>
                        <button onclick="filtrarClientes('pendente')" class="btn-filtro" id="btnFiltroPendente">‚è≥
                            DEVENDO</button>
                        <button onclick="filtrarClientes('pago')" class="btn-filtro" id="btnFiltroPago">‚úÖ PAGOS</button>
                    </div>
                </div>

                <div class="lista-container">
                    <table id="tabelaClientes">
                        <thead>
                            <tr>
                                <th>ALUNO</th>
                                <th style="width: 140px;">STATUS</th>
                                <th style="width: 130px;">FORMA</th>
                                <th style="width: 100px;">VALOR</th>
                                <th style="width: 130px;">A√á√ïES</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <section id="agenda" class="tela">
                <div class="header-section">
                    <h2>AGENDA SEMANAL</h2>
                </div>

                <div class="agenda-filtros">
                    <input type="text" id="buscaHorario" placeholder="üîç BUSCAR HOR√ÅRIO (EX: 15)..."
                        oninput="renderizarAgenda()" style="flex: 2;">
                    <select id="filtroOcupacao" onchange="renderizarAgenda()" style="flex: 1;">
                        <option value="todos">üëÅÔ∏è VER TUDO</option>
                        <option value="ocupados">‚úÖ S√ì OCUPADOS</option>
                        <option value="livres">üÜì S√ì LIVRES</option>
                    </select>
                </div>

                <div class="dias-semana">
                    <button onclick="mudarDia('segunda')" class="btn-dia active" id="btn-segunda">SEG</button>
                    <button onclick="mudarDia('terca')" class="btn-dia" id="btn-terca">TER</button>
                    <button onclick="mudarDia('quarta')" class="btn-dia" id="btn-quarta">QUA</button>
                    <button onclick="mudarDia('quinta')" class="btn-dia" id="btn-quinta">QUI</button>
                    <button onclick="mudarDia('sexta')" class="btn-dia" id="btn-sexta">SEX</button>
                </div>

                <div class="agenda-container" id="containerAgenda"></div>
            </section>

            <section id="financeiro" class="tela">
                <div class="header-section">
                    <h2>RELAT√ìRIO FINANCEIRO</h2>
                </div>

                <div class="painel-controle-fin">
                    <div class="input-mes-wrapper">
                        <label>SELECIONE O PER√çODO:</label>
                        <input type="month" id="mesFinanceiro" onchange="mudarMesRelatorio(this.value)">
                    </div>
                    <button onclick="window.print()" class="btn-print">üñ®Ô∏è IMPRIMIR / PDF</button>
                </div>

                <div class="dashboard-financeiro">
                    <div class="card-dash entrada">
                        <span>RECEITA TOTAL</span>
                        <strong id="dashReceita">R$ 0,00</strong>
                    </div>
                    <div class="card-dash saida">
                        <span>DESPESAS</span>
                        <strong id="dashDespesas">R$ 0,00</strong>
                    </div>
                    <div class="card-dash lucro">
                        <span>LUCRO L√çQUIDO</span>
                        <strong id="dashLucro">R$ 0,00</strong>
                    </div>
                </div>

                <div class="detalhamento-caixa">
                    <h4 style="border-bottom: 1px solid var(--border); padding-bottom: 10px;">DETALHAMENTO DE ENTRADAS
                    </h4>
                    <div class="grid-metodos">
                        <div class="metodo-item">
                            <span class="metodo-nome">üí† PIX</span>
                            <span class="metodo-valor" id="totalPix">R$ 0,00</span>
                        </div>
                        <div class="metodo-item">
                            <span class="metodo-nome">üíµ DINHEIRO</span>
                            <span class="metodo-valor" id="totalDinheiro">R$ 0,00</span>
                        </div>
                        <div class="metodo-item">
                            <span class="metodo-nome">üí≥ CART√ÉO</span>
                            <span class="metodo-valor" id="totalCartao">R$ 0,00</span>
                        </div>
                    </div>
                </div>

                <div class="form-card no-print">
                    <h4>LAN√áAR NOVA DESPESA:</h4>
                    <div class="input-group">
                        <input type="text" id="descGasto" placeholder="EX: CONTA DE LUZ...">
                        <input type="number" id="valorGasto" placeholder="VALOR (R$)">
                        <button onclick="adicionarGasto()" style="background-color: var(--danger);">LAN√áAR
                            D√âBITO</button>
                    </div>
                </div>

                <div class="lista-container">
                    <h3>HIST√ìRICO DE DESPESAS DO M√äS</h3>
                    <table id="tabelaGastos">
                        <thead>
                            <tr>
                                <th>DESCRI√á√ÉO</th>
                                <th>VALOR</th>
                                <th class="no-print">A√á√ÉO</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <div id="modalProntuario" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-header">
                <h3 id="tituloProntuario" style="text-transform: uppercase;">FICHA DE EVOLU√á√ÉO</h3>
            </div>
            <div class="modal-body">
                <input type="hidden" id="idAlunoProntuario">
                <textarea id="textoProntuario" placeholder="Escreva o hist√≥rico cl√≠nico aqui..." rows="10"></textarea>
            </div>
            <div class="modal-footer">
                <button onclick="salvarProntuario()">üíæ SALVAR FICHA</button>
                <button onclick="fecharProntuario()" class="btn-fechar" style="margin-left:10px;">FECHAR</button>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>

</html>
